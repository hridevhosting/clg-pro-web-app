{"ast":null,"code":"import _asyncToGenerator from \"D:/Porjects Git Repo/clg-pro-web-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { NewMeetDetail } from 'src/app/shared/modals/newMeetDetail';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/meetings.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"videoElement\"];\nfunction MeetingsComponent_ng_container_0_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 25);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 26);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 27);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 28);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 29);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 30);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 31);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 32);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 33);\n  }\n}\nfunction MeetingsComponent_ng_container_0_ng_container_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 34);\n    i0.ɵɵelement(2, \"img\", 35);\n    i0.ɵɵelementStart(3, \"div\", 36)(4, \"strong\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"strong\")(7, \"small\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const user_r11 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(user_r11.FirstName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r11.LastName);\n  }\n}\nfunction MeetingsComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MeetingsComponent_ng_container_0_img_1_Template, 1, 0, \"img\", 1);\n    i0.ɵɵtemplate(2, MeetingsComponent_ng_container_0_img_2_Template, 1, 0, \"img\", 2);\n    i0.ɵɵtemplate(3, MeetingsComponent_ng_container_0_img_3_Template, 1, 0, \"img\", 3);\n    i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6);\n    i0.ɵɵtemplate(7, MeetingsComponent_ng_container_0_img_7_Template, 1, 0, \"img\", 7);\n    i0.ɵɵtemplate(8, MeetingsComponent_ng_container_0_img_8_Template, 1, 0, \"img\", 8);\n    i0.ɵɵtemplate(9, MeetingsComponent_ng_container_0_img_9_Template, 1, 0, \"img\", 9);\n    i0.ɵɵtemplate(10, MeetingsComponent_ng_container_0_img_10_Template, 1, 0, \"img\", 10);\n    i0.ɵɵtemplate(11, MeetingsComponent_ng_container_0_img_11_Template, 1, 0, \"img\", 11);\n    i0.ɵɵtemplate(12, MeetingsComponent_ng_container_0_img_12_Template, 1, 0, \"img\", 12);\n    i0.ɵɵelement(13, \"img\", 13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\", 14)(15, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.leaveMeeting());\n    });\n    i0.ɵɵelementStart(16, \"strong\");\n    i0.ɵɵtext(17, \"Leave Meet\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"button\", 16);\n    i0.ɵɵtext(19, \" Custom tooltip \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 17)(21, \"div\", 18)(22, \"div\", 19)(23, \"div\", 20)(24, \"strong\");\n    i0.ɵɵtext(25, \" Candidate List \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(26, MeetingsComponent_ng_container_0_ng_container_26_Template, 9, 2, \"ng-container\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"div\", 22)(28, \"div\")(29, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.startScreenSharing());\n    });\n    i0.ɵɵtext(30, \"Start Screen Sharing\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_Template_button_click_31_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.stopScreenSharing());\n    });\n    i0.ɵɵtext(32, \"Stop Screen Sharing\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(33, \"video\", 24);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.meetingDetails.MeetName.toLowerCase().includes(\"office\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.meetingDetails.MeetName.toLowerCase().includes(\"class\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.meetingDetails.MeetName.toLowerCase().includes(\"cabin\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isMicOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isMicOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isVideoOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isVideoOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isScreenShredOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isScreenShredOn);\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.userList);\n  }\n}\nexport class MeetingsComponent {\n  constructor(_meetingServices, _activeRoute, _router) {\n    this._meetingServices = _meetingServices;\n    this._activeRoute = _activeRoute;\n    this._router = _router;\n    this.meetingDetails = new NewMeetDetail();\n    this.userList = [];\n    this.mediaStream = null;\n    this.isMicOn = false;\n    this.isVideoOn = false;\n    this.isScreenShredOn = false;\n  }\n  ngOnInit() {\n    this._activeRoute.queryParams.subscribe(res => {\n      if (res['meetId']) {\n        this.loadMeetDetailsByMeetingCode(res['meetId']);\n      }\n    });\n  }\n  loadMeetDetailsByMeetingCode(_meetId) {\n    this.meetingDetails = this._meetingServices.getMeetDetailsByMeetCode(_meetId);\n    if (this.meetingDetails.MeetCode) {\n      this.loadUserList();\n    }\n  }\n  loadUserList() {\n    let _localStoArray = localStorage;\n    if (_localStoArray.length) {\n      debugger;\n      for (let i = 0; i < localStorage.length; i++) {\n        let _key = localStorage.key(i);\n        if (_key?.toLowerCase().includes('user')) {\n          let _userDetails = localStorage.getItem(_key);\n          if (_userDetails) {\n            _userDetails = JSON.parse(_userDetails);\n            this.userList.push(_userDetails);\n          }\n        }\n      }\n    }\n  }\n  leaveMeeting() {\n    // localStorage.removeItem('user');\n    this._router.navigate(['dashboard']);\n  }\n  startCamera() {\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(stream => {\n      this.stream = stream;\n      this.videoElement.nativeElement.srcObject = stream;\n    }).catch(error => {\n      console.error('Error accessing camera:', error);\n    });\n  }\n  stopCamera() {\n    if (this.stream) {\n      this.stream.getTracks().forEach(track => track.stop());\n    }\n  }\n  startScreenSharing() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.mediaStream = yield navigator.mediaDevices.getDisplayMedia({\n          video: {\n            displaySurface: 'browser'\n          },\n          audio: false\n        });\n        const videoElement = document.getElementById('screenVideo');\n        if (videoElement) {\n          videoElement.srcObject = _this.mediaStream;\n        }\n        _this.mediaStream.getVideoTracks()[0].onended = () => {\n          _this.stopScreenSharing();\n        };\n      } catch (error) {\n        console.error('Error capturing screen:', error);\n      }\n    })();\n  }\n  stopScreenSharing() {\n    if (this.mediaStream) {\n      this.mediaStream.getTracks().forEach(track => track.stop());\n      this.mediaStream = null;\n    }\n  }\n  static {\n    this.ɵfac = function MeetingsComponent_Factory(t) {\n      return new (t || MeetingsComponent)(i0.ɵɵdirectiveInject(i1.MeetingsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MeetingsComponent,\n      selectors: [[\"app-meetings\"]],\n      viewQuery: function MeetingsComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.videoElement = _t.first);\n        }\n      },\n      decls: 1,\n      vars: 1,\n      consts: [[4, \"ngIf\"], [\"src\", \"assets/images/meeting/office_meet.jpg\", \"style\", \"height: 100dvh;\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"src\", \"assets/images/meeting/class_meet.jpg\", \"style\", \"height: 100dvh;\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"src\", \"assets/images/meeting/cabin_meet.jpg\", \"style\", \"height: 100dvh;\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [2, \"position\", \"absolute\", \"right\", \"0\", \"top\", \"5%\", \"height\", \"90%\"], [1, \"d-flex\", \"justify-items-center\", \"align-items-center\", \"h-100\"], [1, \"card\", \"p-2\", \"flex\", \"flex-column\", \"gap-3\", 2, \"border-top-right-radius\", \"0px !important\", \"border-bottom-right-radius\", \"0px !important\"], [\"class\", \"bg-primary rounded-2 shadow-lg p-1\", \"src\", \"assets/images/meeting_menubar_icons/mic_on.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"class\", \"bg-secondary rounded-2 shadow-lg p-1\", \"src\", \"assets/images/meeting_menubar_icons/mic_off.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"class\", \"bg-primary rounded-2 shadow-lg p-1\", \"src\", \"assets/images/meeting_menubar_icons/video_cam_on.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"class\", \"bg-secondary rounded-2 shadow-lg p-1\", \"src\", \"assets/images/meeting_menubar_icons/video_cam_off.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"class\", \"bg-primary rounded-2 shadow-lg p-1\", \"src\", \"assets/images/meeting_menubar_icons/share_screen.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"class\", \"bg-secondary rounded-2 shadow-lg p-1\", \"src\", \"assets/images/meeting_menubar_icons/cancel_sharing.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"src\", \"assets/images/meeting_menubar_icons/end_meeting.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-danger\", \"rounded-2\", \"shadow-lg\", \"p-1\"], [2, \"position\", \"absolute\", \"top\", \"2%\", \"right\", \"2%\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"text-white\", 2, \"background-color\", \"red\", 3, \"click\"], [\"type\", \"button\", \"data-tip\", \"hello\", 1, \"tooltip\", \"tooltip-open\"], [1, \"flex\", \"justify-center\", \"w-100\"], [1, \"flex\", \"flex-row\", \"gap-2\", 2, \"min-width\", \"80dvw\", \"max-width\", \"80dvw\", \"min-height\", \"90dvh\", \"max-height\", \"90dvh\", \"overflow-x\", \"auto\", \"position\", \"absolute\", \"bottom\", \"0\"], [1, \"flex\", \"flex-row\", \"gap-1\", \"w-100\"], [1, \"card\", \"p-2\", \"flex\", \"flex-column\", \"gap-2\", 2, \"min-width\", \"25%\", \"max-width\", \"25%\", \"min-height\", \"85dvh\", \"max-height\", \"85dvh\", \"overflow-x\", \"auto\"], [4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"p-2\", 2, \"min-width\", \"74% !important\", \"max-width\", \"74% !important\", \"min-height\", \"85dvh\", \"max-height\", \"85dvh\", \"overflow-x\", \"auto\"], [3, \"click\"], [\"id\", \"screenVideo\", \"autoplay\", \"\", \"playsinline\", \"\", 2, \"width\", \"100%\", \"border\", \"2px solid black\"], [\"src\", \"assets/images/meeting/office_meet.jpg\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 2, \"height\", \"100dvh\"], [\"src\", \"assets/images/meeting/class_meet.jpg\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 2, \"height\", \"100dvh\"], [\"src\", \"assets/images/meeting/cabin_meet.jpg\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 2, \"height\", \"100dvh\"], [\"src\", \"assets/images/meeting_menubar_icons/mic_on.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-primary\", \"rounded-2\", \"shadow-lg\", \"p-1\"], [\"src\", \"assets/images/meeting_menubar_icons/mic_off.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-secondary\", \"rounded-2\", \"shadow-lg\", \"p-1\"], [\"src\", \"assets/images/meeting_menubar_icons/video_cam_on.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-primary\", \"rounded-2\", \"shadow-lg\", \"p-1\"], [\"src\", \"assets/images/meeting_menubar_icons/video_cam_off.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-secondary\", \"rounded-2\", \"shadow-lg\", \"p-1\"], [\"src\", \"assets/images/meeting_menubar_icons/share_screen.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-primary\", \"rounded-2\", \"shadow-lg\", \"p-1\"], [\"src\", \"assets/images/meeting_menubar_icons/cancel_sharing.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-secondary\", \"rounded-2\", \"shadow-lg\", \"p-1\"], [1, \"card\", \"p-3\", \"flex\", \"flex-row\", \"mb-2\"], [\"src\", \"assets/images/meeting/user_image.png\", 1, \"mask\", \"mask-heart\", 2, \"height\", \"50px !important\", \"width\", \"50px !important\"], [1, \"flex\", \"flex-col\"]],\n      template: function MeetingsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, MeetingsComponent_ng_container_0_Template, 34, 10, \"ng-container\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", true);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf],\n      styles: [\"video[_ngcontent-%COMP%] {\\n  width: 100%;\\n  max-height: 650px !important;\\n  border: 2px solid black;\\n  border-radius: 10px;\\n  margin-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQGNvcmUvY29tcG9uZW50cy9tZWV0aW5ncy9tZWV0aW5ncy5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL1BvcmplY3RzJTIwR2l0JTIwUmVwby9jbGctcHJvLXdlYi1hcHAvc3JjL2FwcC9AY29yZS9jb21wb25lbnRzL21lZXRpbmdzL21lZXRpbmdzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBQTtFQUVBLDRCQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FDQUYiLCJzb3VyY2VzQ29udGVudCI6WyJ2aWRlbyB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgLy8gbWF4LXdpZHRoOiA2MDBweDtcclxuICBtYXgtaGVpZ2h0OiA2NTBweCAhaW1wb3J0YW50O1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxufVxyXG4iLCJ2aWRlbyB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtaGVpZ2h0OiA2NTBweCAhaW1wb3J0YW50O1xuICBib3JkZXI6IDJweCBzb2xpZCBibGFjaztcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["NewMeetDetail","i0","MeetingsComponent","constructor","_meetingServices","_activeRoute","_router","ngOnInit","queryParams","subscribe","res","loadMeetDetailsByMeetingCode","_meetId","meetingDetails","getMeetDetailsByMeetCode","MeetCode","loadUserList","_localStoArray","localStorage","length","i","_key","key","toLowerCase","includes","_userDetails","getItem","JSON","parse","userList","push","leaveMeeting","navigate","startCamera","navigator","mediaDevices","getUserMedia","video","then","stream","videoElement","nativeElement","srcObject","catch","error","console","stopCamera","getTracks","forEach","track","stop","startScreenSharing","mediaStream","getDisplayMedia","displaySurface","audio","document","getElementById","getVideoTracks","onended","stopScreenSharing","selectors","viewQuery"],"sourceRoot":"","sources":["D:\\Porjects Git Repo\\clg-pro-web-app\\src\\app\\@core\\components\\meetings\\meetings.component.ts","D:\\Porjects Git Repo\\clg-pro-web-app\\src\\app\\@core\\components\\meetings\\meetings.component.html"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { MeetingsService } from '../../services/meetings.service';\r\nimport { NewMeetDetail } from 'src/app/shared/modals/newMeetDetail';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { UserDetail } from 'src/app/shared/modals/userDetail';\r\n\r\n@Component({\r\n  selector: 'app-meetings',\r\n  templateUrl: './meetings.component.html',\r\n  styleUrls: ['./meetings.component.scss']\r\n})\r\nexport class MeetingsComponent implements OnInit {\r\n  @ViewChild('videoElement', { static: false }) videoElement!: ElementRef;\r\n  stream!: MediaStream;\r\n\r\n  constructor(\r\n    private _meetingServices: MeetingsService,\r\n    private _activeRoute: ActivatedRoute,\r\n    private _router: Router\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this._activeRoute.queryParams.subscribe(\r\n      (res: any) => {\r\n        if (res['meetId']) {\r\n          this.loadMeetDetailsByMeetingCode(res['meetId']);\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  meetingDetails: NewMeetDetail = new NewMeetDetail();\r\n\r\n  loadMeetDetailsByMeetingCode(_meetId: string) {\r\n    this.meetingDetails = this._meetingServices.getMeetDetailsByMeetCode(_meetId);\r\n    if (this.meetingDetails.MeetCode) {\r\n      this.loadUserList();\r\n    }\r\n  }\r\n\r\n  userList: UserDetail[] = [];\r\n  loadUserList() {\r\n    let _localStoArray = localStorage;\r\n    if (_localStoArray.length) {\r\n      debugger\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        let _key = localStorage.key(i);\r\n        if (_key?.toLowerCase().includes('user')) {\r\n          let _userDetails: any = localStorage.getItem(_key);\r\n          if (_userDetails) {\r\n            _userDetails = JSON.parse(_userDetails);\r\n            this.userList.push(_userDetails);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  leaveMeeting() {\r\n    // localStorage.removeItem('user');\r\n    this._router.navigate(['dashboard']);\r\n  }\r\n\r\n  startCamera() {\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true })\r\n      .then((stream) => {\r\n        this.stream = stream;\r\n        this.videoElement.nativeElement.srcObject = stream;\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error accessing camera:', error);\r\n      });\r\n  }\r\n\r\n  stopCamera() {\r\n    if (this.stream) {\r\n      this.stream.getTracks().forEach(track => track.stop());\r\n    }\r\n  }\r\n\r\n  private mediaStream: MediaStream | null = null;\r\n\r\n  async startScreenSharing() {\r\n    try {\r\n      this.mediaStream = await navigator.mediaDevices.getDisplayMedia({\r\n        video: {\r\n          displaySurface: 'browser',\r\n        } as MediaTrackConstraints,\r\n        audio: false\r\n      });\r\n\r\n      const videoElement = document.getElementById('screenVideo') as HTMLVideoElement;\r\n      if (videoElement) {\r\n        videoElement.srcObject = this.mediaStream;\r\n      }\r\n\r\n      this.mediaStream.getVideoTracks()[0].onended = () => {\r\n        this.stopScreenSharing();\r\n      };\r\n    } catch (error) {\r\n      console.error('Error capturing screen:', error);\r\n    }\r\n  }\r\n\r\n  stopScreenSharing() {\r\n    if (this.mediaStream) {\r\n      this.mediaStream.getTracks().forEach(track => track.stop());\r\n      this.mediaStream = null;\r\n    }\r\n  }\r\n\r\n  isMicOn:boolean = false;\r\n  isVideoOn:boolean = false;\r\n  isScreenShredOn:boolean = false;\r\n\r\n\r\n}\r\n","<ng-container *ngIf=\"true\">\r\n  <img src=\"assets/images/meeting/office_meet.jpg\"\r\n    *ngIf=\"meetingDetails.MeetName.toLowerCase().includes('office')\"\r\n    style=\"height: 100dvh;\" width=\"100%\" alt srcset>\r\n  <img src=\"assets/images/meeting/class_meet.jpg\"\r\n    *ngIf=\"meetingDetails.MeetName.toLowerCase().includes('class')\"\r\n    style=\"height: 100dvh;\" width=\"100%\" alt srcset>\r\n  <img src=\"assets/images/meeting/cabin_meet.jpg\"\r\n    *ngIf=\"meetingDetails.MeetName.toLowerCase().includes('cabin')\"\r\n    style=\"height: 100dvh;\" width=\"100%\" alt srcset>\r\n  <div style=\"position: absolute; right: 0; top: 5%; height: 90%;\">\r\n    <div class=\"d-flex justify-items-center align-items-center h-100\">\r\n      <div class=\"card p-2 flex flex-column gap-3\"\r\n        style=\"border-top-right-radius: 0px !important; border-bottom-right-radius: 0px !important;\">\r\n        <img class=\"bg-primary rounded-2 shadow-lg p-1\" *ngIf=\"isMicOn\"\r\n          src=\"assets/images/meeting_menubar_icons/mic_on.png\" height=\"50px\"\r\n          width=\"50px\" alt srcset>\r\n        <img class=\"bg-secondary rounded-2 shadow-lg p-1\" *ngIf=\"!isMicOn\"\r\n          src=\"assets/images/meeting_menubar_icons/mic_off.png\" height=\"50px\"\r\n          width=\"50px\" alt srcset>\r\n        <img class=\"bg-primary rounded-2 shadow-lg p-1\" *ngIf=\"isVideoOn\"\r\n          src=\"assets/images/meeting_menubar_icons/video_cam_on.png\"\r\n          height=\"50px\" width=\"50px\" alt srcset>\r\n        <img class=\"bg-secondary rounded-2 shadow-lg p-1\" *ngIf=\"!isVideoOn\"\r\n          src=\"assets/images/meeting_menubar_icons/video_cam_off.png\"\r\n          height=\"50px\" width=\"50px\" alt srcset>\r\n        <img class=\"bg-primary rounded-2 shadow-lg p-1\" *ngIf=\"isScreenShredOn\"\r\n          src=\"assets/images/meeting_menubar_icons/share_screen.png\"\r\n          height=\"50px\" width=\"50px\" alt srcset>\r\n        <img class=\"bg-secondary rounded-2 shadow-lg p-1\" *ngIf=\"!isScreenShredOn\"\r\n          src=\"assets/images/meeting_menubar_icons/cancel_sharing.png\"\r\n          height=\"50px\" width=\"50px\" alt srcset>\r\n        <img class=\"bg-danger rounded-2 shadow-lg p-1\"\r\n          src=\"assets/images/meeting_menubar_icons/end_meeting.png\"\r\n          height=\"50px\" width=\"50px\" alt srcset>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div style=\"position: absolute; top: 2%; right: 2%;\">\r\n    <button type=\"button\" class=\"btn btn-sm  text-white\"\r\n      style=\"background-color: red;\" (click)=\"leaveMeeting()\">\r\n      <strong>Leave Meet</strong>\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-secondary\"\r\n      class=\"tooltip tooltip-open\" data-tip=\"hello\">\r\n      Custom tooltip\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"flex justify-center w-100\">\r\n    <div class=\"flex flex-row gap-2\"\r\n      style=\"min-width: 80dvw; max-width: 80dvw; min-height: 90dvh; max-height: 90dvh; overflow-x: auto; position: absolute; bottom: 0;\">\r\n\r\n      <div class=\"flex flex-row gap-1 w-100\">\r\n        <div class=\"card p-2 flex flex-column gap-2\"\r\n          style=\"min-width: 25%; max-width: 25%; min-height: 85dvh; max-height: 85dvh; overflow-x: auto;\">\r\n\r\n          <strong>\r\n            Candidate List\r\n          </strong>\r\n          <ng-container *ngFor=\"let user of userList\">\r\n            <div class=\"card p-3 flex flex-row mb-2\">\r\n              <img class=\"mask mask-heart\"\r\n                src=\"assets/images/meeting/user_image.png\"\r\n                style=\"height: 50px !important; width: 50px !important;\" />\r\n              <div class=\"flex flex-col\">\r\n                <strong>{{user.FirstName}}</strong>\r\n                <strong><small>{{user.LastName}}</small></strong>\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n        <div class=\"card p-2\"\r\n          style=\"min-width: 74% !important; max-width: 74% !important; min-height: 85dvh; max-height: 85dvh; overflow-x: auto;\">\r\n          <!-- <div class=\"flex flex-column gap-1\">\r\n            <div class=\"flex flex-row justify-content-between\">\r\n              <strong>\r\n                Objective\r\n              </strong>\r\n              <input type=\"checkbox\" checked=\"checked\" role=\"switch\"\r\n                class=\"toggle border-indigo-600 bg-indigo-500 checked:bg-orange-400 checked:text-orange-800 checked:border-orange-500 \" />\r\n            </div>\r\n          </div>\r\n          <div class=\"camera-container\">\r\n            <video #videoElement autoplay></video>\r\n            <div class=\"flex flex-row justify-content-between mt-2\">\r\n              <button class=\"btn btn-primary\" (click)=\"startCamera()\">Start Camera</button>\r\n              <button class=\"btn btn-primary\" (click)=\"stopCamera()\">Stop Camera</button>\r\n            </div>\r\n          </div> -->\r\n          <div>\r\n            <button (click)=\"startScreenSharing()\">Start Screen Sharing</button>\r\n            <button (click)=\"stopScreenSharing()\">Stop Screen Sharing</button>\r\n            <video id=\"screenVideo\" autoplay playsinline\r\n              style=\"width: 100%; border: 2px solid black;\"></video>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}