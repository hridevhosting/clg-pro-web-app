{"ast":null,"code":"import _asyncToGenerator from \"D:/Porjects Git Repo/clg-pro-web-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { NewMeetDetail } from 'src/app/shared/modals/newMeetDetail';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/meetings.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"videoElement\"];\nfunction MeetingsComponent_ng_container_0_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 26);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 27);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 28);\n  }\n}\nfunction MeetingsComponent_ng_container_0_video_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"video\", 29, 30);\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 31);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_img_9_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.isMicOn = false);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 32);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_img_10_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.isMicOn = true);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 33);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_img_11_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      ctx_r18.isVideoOn = false;\n      return i0.ɵɵresetView(ctx_r18.stopCamera());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 34);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_img_12_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      ctx_r20.isVideoOn = true;\n      return i0.ɵɵresetView(ctx_r20.startCamera());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 35);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_img_13_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      ctx_r22.isScreenShredOn = false;\n      return i0.ɵɵresetView(ctx_r22.stopScreenSharing());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeetingsComponent_ng_container_0_img_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 36);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_img_14_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      ctx_r24.isScreenShredOn = true;\n      return i0.ɵɵresetView(ctx_r24.startScreenSharing());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeetingsComponent_ng_container_0_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 37);\n    i0.ɵɵelement(2, \"img\", 38);\n    i0.ɵɵelementStart(3, \"div\", 39)(4, \"strong\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"strong\")(7, \"small\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const user_r26 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(user_r26.FirstName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r26.LastName);\n  }\n}\nfunction MeetingsComponent_ng_container_0_video_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"video\", 40);\n  }\n}\nfunction MeetingsComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MeetingsComponent_ng_container_0_img_1_Template, 1, 0, \"img\", 1);\n    i0.ɵɵtemplate(2, MeetingsComponent_ng_container_0_img_2_Template, 1, 0, \"img\", 2);\n    i0.ɵɵtemplate(3, MeetingsComponent_ng_container_0_img_3_Template, 1, 0, \"img\", 3);\n    i0.ɵɵelementStart(4, \"div\", 4);\n    i0.ɵɵtemplate(5, MeetingsComponent_ng_container_0_video_5_Template, 2, 0, \"video\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7)(8, \"div\", 8);\n    i0.ɵɵtemplate(9, MeetingsComponent_ng_container_0_img_9_Template, 1, 0, \"img\", 9);\n    i0.ɵɵtemplate(10, MeetingsComponent_ng_container_0_img_10_Template, 1, 0, \"img\", 10);\n    i0.ɵɵtemplate(11, MeetingsComponent_ng_container_0_img_11_Template, 1, 0, \"img\", 11);\n    i0.ɵɵtemplate(12, MeetingsComponent_ng_container_0_img_12_Template, 1, 0, \"img\", 12);\n    i0.ɵɵtemplate(13, MeetingsComponent_ng_container_0_img_13_Template, 1, 0, \"img\", 13);\n    i0.ɵɵtemplate(14, MeetingsComponent_ng_container_0_img_14_Template, 1, 0, \"img\", 14);\n    i0.ɵɵelementStart(15, \"img\", 15);\n    i0.ɵɵlistener(\"click\", function MeetingsComponent_ng_container_0_Template_img_click_15_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.leaveMeeting());\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(16, \"div\", 16)(17, \"div\", 17)(18, \"div\", 18)(19, \"div\", 19)(20, \"strong\");\n    i0.ɵɵtext(21, \" Candidate List \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(22, MeetingsComponent_ng_container_0_ng_container_22_Template, 9, 2, \"ng-container\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 21)(24, \"div\", 22)(25, \"div\", 23)(26, \"strong\");\n    i0.ɵɵtext(27, \" Objective \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(28, \"input\", 24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(29, MeetingsComponent_ng_container_0_video_29_Template, 1, 0, \"video\", 25);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.meetingDetails.MeetName.toLowerCase().includes(\"office\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.meetingDetails.MeetName.toLowerCase().includes(\"class\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.meetingDetails.MeetName.toLowerCase().includes(\"cabin\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isVideoOn);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isMicOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isMicOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isVideoOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isVideoOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isScreenShredOn);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isScreenShredOn);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.userList);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isScreenShredOn);\n  }\n}\nexport let MeetingsComponent = /*#__PURE__*/(() => {\n  class MeetingsComponent {\n    constructor(_meetingServices, _activeRoute, _router) {\n      this._meetingServices = _meetingServices;\n      this._activeRoute = _activeRoute;\n      this._router = _router;\n      this.meetingDetails = new NewMeetDetail();\n      this.userList = [];\n      this.mediaStream = null;\n      this.isMicOn = false;\n      this.isVideoOn = false;\n      this.isScreenShredOn = false;\n    }\n    ngOnInit() {\n      this._activeRoute.queryParams.subscribe(res => {\n        if (res['meetId']) {\n          this.loadMeetDetailsByMeetingCode(res['meetId']);\n        }\n      });\n    }\n    loadMeetDetailsByMeetingCode(_meetId) {\n      this.meetingDetails = this._meetingServices.getMeetDetailsByMeetCode(_meetId);\n      if (this.meetingDetails.MeetCode) {\n        this.loadUserList();\n      }\n    }\n    loadUserList() {\n      let _localStoArray = localStorage;\n      if (_localStoArray.length) {\n        debugger;\n        for (let i = 0; i < localStorage.length; i++) {\n          let _key = localStorage.key(i);\n          if (_key?.toLowerCase().includes('user')) {\n            let _userDetails = localStorage.getItem(_key);\n            if (_userDetails) {\n              _userDetails = JSON.parse(_userDetails);\n              this.userList.push(_userDetails);\n            }\n          }\n        }\n      }\n    }\n    leaveMeeting() {\n      // localStorage.removeItem('user');\n      this._router.navigate(['dashboard']);\n    }\n    startCamera() {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        this.stream = stream;\n        this.videoElement.nativeElement.srcObject = stream;\n      }).catch(error => {\n        console.error('Error accessing camera:', error);\n      });\n    }\n    stopCamera() {\n      if (this.stream) {\n        this.stream.getTracks().forEach(track => track.stop());\n      }\n    }\n    startScreenSharing() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          _this.mediaStream = yield navigator.mediaDevices.getDisplayMedia({\n            video: {\n              displaySurface: 'browser'\n            },\n            audio: false\n          });\n          const videoElement = document.getElementById('screenVideo');\n          if (videoElement) {\n            videoElement.srcObject = _this.mediaStream;\n          }\n          _this.mediaStream.getVideoTracks()[0].onended = () => {\n            _this.stopScreenSharing();\n          };\n        } catch (error) {\n          console.error('Error capturing screen:', error);\n        }\n      })();\n    }\n    stopScreenSharing() {\n      if (this.mediaStream) {\n        this.mediaStream.getTracks().forEach(track => track.stop());\n        this.mediaStream = null;\n      }\n    }\n    static {\n      this.ɵfac = function MeetingsComponent_Factory(t) {\n        return new (t || MeetingsComponent)(i0.ɵɵdirectiveInject(i1.MeetingsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MeetingsComponent,\n        selectors: [[\"app-meetings\"]],\n        viewQuery: function MeetingsComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.videoElement = _t.first);\n          }\n        },\n        decls: 1,\n        vars: 1,\n        consts: [[4, \"ngIf\"], [\"src\", \"assets/images/meeting/office_meet.jpg\", \"style\", \"height: 100dvh;\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"src\", \"assets/images/meeting/class_meet.jpg\", \"style\", \"height: 100dvh;\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [\"src\", \"assets/images/meeting/cabin_meet.jpg\", \"style\", \"height: 100dvh;\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 4, \"ngIf\"], [2, \"position\", \"absolute\", \"bottom\", \"10%\", \"left\", \"2%\", \"min-height\", \"150px !important\", \"max-height\", \"150px !important\", \"z-index\", \"10\"], [\"style\", \"min-height: 20dvh !important; max-height: 20dvh !important; width: 20dvw;\", \"autoplay\", \"\", 4, \"ngIf\"], [2, \"position\", \"absolute\", \"right\", \"0\", \"top\", \"5%\", \"height\", \"90%\"], [1, \"d-flex\", \"justify-items-center\", \"align-items-center\", \"h-100\"], [1, \"card\", \"p-2\", \"flex\", \"flex-column\", \"gap-3\", 2, \"border-top-right-radius\", \"0px !important\", \"border-bottom-right-radius\", \"0px !important\"], [\"class\", \"bg-primary rounded-2 shadow-lg p-1 cursor-pointer\", \"src\", \"assets/images/meeting_menubar_icons/mic_on.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"bg-secondary rounded-2 shadow-lg p-1 cursor-pointer\", \"src\", \"assets/images/meeting_menubar_icons/mic_off.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"bg-primary rounded-2 shadow-lg p-1 cursor-pointer\", \"src\", \"assets/images/meeting_menubar_icons/video_cam_on.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"bg-secondary rounded-2 shadow-lg p-1 cursor-pointer\", \"src\", \"assets/images/meeting_menubar_icons/video_cam_off.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"bg-primary rounded-2 shadow-lg p-1 cursor-pointer\", \"src\", \"assets/images/meeting_menubar_icons/share_screen.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"bg-secondary rounded-2 shadow-lg p-1 cursor-pointer\", \"src\", \"assets/images/meeting_menubar_icons/cancel_sharing.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 3, \"click\", 4, \"ngIf\"], [\"src\", \"assets/images/meeting_menubar_icons/end_meeting.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-danger\", \"rounded-2\", \"shadow-lg\", \"p-1\", \"cursor-pointer\", 3, \"click\"], [1, \"flex\", \"justify-center\", \"w-100\"], [1, \"flex\", \"flex-row\", \"gap-2\", 2, \"min-width\", \"80dvw\", \"max-width\", \"80dvw\", \"min-height\", \"90dvh\", \"max-height\", \"90dvh\", \"overflow-x\", \"auto\", \"position\", \"absolute\", \"bottom\", \"0\"], [1, \"flex\", \"flex-row\", \"gap-1\", \"w-100\"], [1, \"card\", \"p-2\", \"flex\", \"flex-column\", \"gap-2\", 2, \"min-width\", \"25%\", \"max-width\", \"25%\", \"min-height\", \"85dvh\", \"max-height\", \"85dvh\", \"overflow-x\", \"auto\", \"position\", \"relative\"], [4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"p-2\", 2, \"min-width\", \"74% !important\", \"max-width\", \"74% !important\", \"min-height\", \"85dvh\", \"max-height\", \"85dvh\", \"overflow-x\", \"auto\"], [1, \"flex\", \"flex-column\", \"gap-1\"], [1, \"flex\", \"flex-row\", \"justify-content-between\"], [\"type\", \"checkbox\", \"checked\", \"checked\", \"role\", \"switch\", 1, \"toggle\", \"border-indigo-600\", \"bg-indigo-500\", \"checked:bg-orange-400\", \"checked:text-orange-800\", \"checked:border-orange-500\"], [\"id\", \"screenVideo\", \"autoplay\", \"\", \"playsinline\", \"\", \"mediagroup\", \"\", 4, \"ngIf\"], [\"src\", \"assets/images/meeting/office_meet.jpg\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 2, \"height\", \"100dvh\"], [\"src\", \"assets/images/meeting/class_meet.jpg\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 2, \"height\", \"100dvh\"], [\"src\", \"assets/images/meeting/cabin_meet.jpg\", \"width\", \"100%\", \"alt\", \"\", \"srcset\", \"\", 2, \"height\", \"100dvh\"], [\"autoplay\", \"\", 2, \"min-height\", \"20dvh !important\", \"max-height\", \"20dvh !important\", \"width\", \"20dvw\"], [\"videoElement\", \"\"], [\"src\", \"assets/images/meeting_menubar_icons/mic_on.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-primary\", \"rounded-2\", \"shadow-lg\", \"p-1\", \"cursor-pointer\", 3, \"click\"], [\"src\", \"assets/images/meeting_menubar_icons/mic_off.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-secondary\", \"rounded-2\", \"shadow-lg\", \"p-1\", \"cursor-pointer\", 3, \"click\"], [\"src\", \"assets/images/meeting_menubar_icons/video_cam_on.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-primary\", \"rounded-2\", \"shadow-lg\", \"p-1\", \"cursor-pointer\", 3, \"click\"], [\"src\", \"assets/images/meeting_menubar_icons/video_cam_off.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-secondary\", \"rounded-2\", \"shadow-lg\", \"p-1\", \"cursor-pointer\", 3, \"click\"], [\"src\", \"assets/images/meeting_menubar_icons/share_screen.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-primary\", \"rounded-2\", \"shadow-lg\", \"p-1\", \"cursor-pointer\", 3, \"click\"], [\"src\", \"assets/images/meeting_menubar_icons/cancel_sharing.png\", \"height\", \"50px\", \"width\", \"50px\", \"alt\", \"\", \"srcset\", \"\", 1, \"bg-secondary\", \"rounded-2\", \"shadow-lg\", \"p-1\", \"cursor-pointer\", 3, \"click\"], [1, \"card\", \"p-3\", \"flex\", \"flex-row\", \"mb-2\", \"gap-2\"], [\"src\", \"assets/images/meeting/user_image.png\", 1, \"mask\", \"mask-heart\", 2, \"height\", \"50px !important\", \"width\", \"50px !important\"], [1, \"flex\", \"flex-col\"], [\"id\", \"screenVideo\", \"autoplay\", \"\", \"playsinline\", \"\", \"mediagroup\", \"\"]],\n        template: function MeetingsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, MeetingsComponent_ng_container_0_Template, 30, 12, \"ng-container\", 0);\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", true);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf],\n        styles: [\"video[_ngcontent-%COMP%]{width:100%;min-height:95%!important;max-height:95%!important;border:2px solid black;border-radius:10px;margin-top:10px;background-color:#000}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer!important}\"]\n      });\n    }\n  }\n  return MeetingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}